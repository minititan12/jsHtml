<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Document</title>
    <style>
        .scroll-spy{
            position: fixed;
            top: 0;
            right: 0;
            border: 5px solid;
            background-color: white;
            list-style-type: none;
            margin: 0;
            padding: 0;
            width: 60px;
            text-align: center;
        }

        .scroll-spy a{
            text-decoration: none;
        }

        .active{
            background-color: red;
        }

        .progress{
            position: fixed;
            bottom: 20px;
            right: 30px;
            width: 200px;
            height: 40px;
            background-color: lightslategray;
            border: 2px solid lightcoral;
            border-radius: 5px;
            font-size: 20px;
            line-height: 40px;
        }

        .progress>div{
            width: 0%;
            height: 100%;
            background-color: lightgreen;
        }
    </style>
</head>

<body>
    <section>
        <h2 id="a1">001</h2>
        <p>Lorem ipsum dolor, sit amet consectetur adipisicing elit. Sint consequuntur, quos nulla corporis praesentium possimus tenetur, a atque iure accusamus fugit. Quasi blanditiis amet quibusdam ipsum alias, dolorem aliquid debitis.</p>
        <p>Lorem ipsum dolor sit amet consectetur, adipisicing elit. Error nulla modi veritatis eius, placeat laboriosam consequatur, dicta omnis dignissimos quos accusamus vel eveniet architecto magni fuga! Dicta eius nisi earum?</p>
        <p>Lorem ipsum dolor sit, amet consectetur adipisicing elit. Numquam nam obcaecati consequatur quo, placeat doloribus blanditiis cupiditate eveniet! Tenetur commodi mollitia voluptatibus velit dicta voluptate perspiciatis, necessitatibus nemo eligendi minus!</p>
        <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Magnam ratione nulla enim sapiente consectetur modi quos quaerat esse sed reprehenderit consequuntur, voluptas quisquam doloremque, maxime, dolores dolore unde cupiditate fugiat.</p>
        <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Voluptas nesciunt explicabo, facilis inventore nobis laudantium veniam quis ipsam asperiores ipsa similique quod hic, perferendis magnam earum cumque exercitationem? Aspernatur, perferendis.</p>
        <h2 id="a2">002</h2>
        <p>Deleniti impedit fuga omnis eius debitis dolorem asperiores. Iusto voluptatum est accusamus veniam nulla dignissimos eius culpa minima? Ratione consequatur laudantium cupiditate itaque corporis labore distinctio repellat exercitationem inventore doloremque!</p>
        <p>Facere quo quisquam, ipsa provident iusto illo optio, similique tenetur temporibus, sunt deserunt sint sit fugit. Illum dicta modi quaerat aspernatur ut voluptates, neque molestiae mollitia harum adipisci quam saepe?</p>
        <p>Consequuntur eveniet, corrupti cupiditate, doloremque sint perferendis laboriosam id iure tenetur cum minus. Consequatur assumenda facere dolorem quo consectetur corrupti, ullam id, dolore reprehenderit aperiam officia voluptatum. Dolores, voluptatibus cum!</p>
        <p>Nostrum tempora provident magni commodi odio officia nesciunt nam, quaerat deserunt quis voluptatibus nemo autem velit id illo pariatur dolores voluptas laboriosam vitae sequi alias unde nulla beatae. Nostrum, et.</p>
        <p>Nostrum quidem, reprehenderit quis placeat suscipit iusto minima explicabo expedita labore adipisci perspiciatis vero optio quibusdam sapiente aperiam in dolorem assumenda eveniet? Quam aut ullam quis, soluta aperiam magni. Optio?</p>
        <h2 id="a3">003</h2>
        <p>Mollitia, in, placeat recusandae repudiandae veniam porro facere nihil saepe fuga voluptate enim? Deserunt rem voluptatibus earum, libero illo tenetur enim asperiores sapiente iure facere, odio possimus consequuntur quod numquam.</p>
        <p>Incidunt debitis possimus, quod corporis laboriosam totam eos optio veniam sunt, placeat inventore voluptates, eveniet error commodi impedit repudiandae officia sapiente est autem ipsa. Illum, distinctio! Asperiores assumenda molestiae excepturi.</p>
        <p>Provident fuga voluptate, sed eum qui maiores ratione architecto accusantium, totam necessitatibus dolorum. Esse at voluptatum corporis labore. Neque dolore optio quasi minima itaque iure doloribus aliquid deserunt labore reiciendis!</p>
        <p>Pariatur quos minima corrupti saepe, repudiandae, optio veniam nemo modi doloribus nostrum nisi tempora aspernatur ad sequi reprehenderit voluptatum voluptates est. Pariatur error nisi modi doloremque corporis sunt quas quia.</p>
        <p>Enim, deleniti molestiae, placeat sunt, corporis ducimus ea itaque nesciunt recusandae cum voluptatum dignissimos sequi culpa! Ducimus quasi quisquam fugiat totam error modi nisi autem hic atque exercitationem, reiciendis assumenda.</p>
        <h2 id="a4">004</h2>
        <p>Voluptatem repudiandae alias nisi atque reiciendis ad amet, unde aliquid quis enim dolorum quasi consectetur illo, dolore aperiam eligendi tenetur, minima ullam adipisci tempore. Accusantium cupiditate consequatur molestias molestiae amet?</p>
        <p>Dolor, hic, dignissimos aspernatur, rem voluptate similique accusantium cumque iure quaerat eveniet nulla itaque molestiae eaque harum natus doloribus? Dignissimos quibusdam rem a in commodi fuga modi quas nulla explicabo.</p>
        <p>Rerum, unde molestiae iure eos perferendis necessitatibus, adipisci maiores temporibus labore veritatis dicta consequuntur mollitia sint vero quaerat accusamus nulla repellendus totam modi id, assumenda aut est accusantium enim? Quam.</p>
        <p>Esse tempore, ab laudantium non unde aperiam qui fugit minima doloremque rem reiciendis soluta est sit adipisci, modi eaque iste ut impedit amet molestiae repudiandae cumque. Ad a nostrum labore?</p>
        <p>Non a quas nemo impedit officiis dignissimos unde ratione molestias repellat dicta expedita beatae amet sint aut harum voluptate distinctio, voluptatum nam rerum ex! Consequuntur quod doloribus quaerat dolorum necessitatibus.</p>
        <h2 id="a5">005</h2>
        <p>Neque dolor corporis alias sint iure est harum explicabo, suscipit accusantium, sapiente velit doloremque placeat perspiciatis debitis tenetur ipsam rem labore optio voluptatem. Saepe, velit ea in maiores recusandae expedita?</p>
        <p>Error ducimus consequuntur, vitae similique corrupti eos odit dolore sunt! Fugiat, veniam veritatis mollitia rem magni hic facere temporibus vitae tempora fuga maiores odio quae corporis, libero dolore. Eum, quidem.</p>
        <p>Odit voluptatem asperiores ipsa ad maxime error? Cupiditate itaque ratione debitis saepe, officiis eius. Nesciunt ducimus nam hic facilis perferendis et neque, molestiae nemo fuga ea, laudantium vero, natus cumque?</p>
        <p>Non numquam dolor quae porro possimus modi a natus debitis quisquam hic delectus consequatur odit reiciendis minima suscipit voluptatum repellendus ea unde mollitia necessitatibus, ad, vero quibusdam nihil? Ducimus, dolor.</p>
        <p>Eius commodi quos magnam saepe? Pariatur, minima nesciunt vel nemo, labore eligendi ipsam magni ab incidunt culpa eos, quibusdam aperiam! Doloribus perferendis optio ipsam vel, voluptatum aliquid labore blanditiis iure.</p>
        <h2 id="a6">006</h2>
        <p>Magnam veniam eveniet expedita saepe iste consequuntur sit aliquam dolore. Quibusdam, illum dolore, aperiam adipisci vero laboriosam doloremque dolores veritatis quisquam id non doloribus ratione provident similique corporis beatae quaerat?</p>
        <p>Quod distinctio sequi pariatur repellendus nostrum iste iusto, facere adipisci alias aliquam autem vero exercitationem voluptatibus. Distinctio quidem, modi tempora sunt quis provident nesciunt dolorem minus quisquam! Neque, blanditiis at.</p>
        <p>Quam nulla illo molestias sed consectetur velit accusantium beatae suscipit dolores in quo eum, repellendus, cupiditate expedita, quaerat reprehenderit qui! Consectetur repellendus, quas temporibus impedit non magni accusantium iusto eos.</p>
        <p>Saepe ea quo, ab fuga iste ipsa asperiores accusamus ipsum in, aut, quidem voluptate. Facere, facilis? Asperiores aspernatur maxime deleniti temporibus iste impedit minus. Facilis sequi quo voluptatibus aspernatur reprehenderit.</p>
        <p>Sapiente aliquid repellat, eligendi molestiae dicta possimus reiciendis aut non maxime deleniti consequuntur cupiditate placeat veniam recusandae vero quia, voluptates molestias beatae ducimus repudiandae? Doloremque maxime molestias ipsam doloribus perferendis!</p>
        <h2 id="a7">007</h2>
        <p>Totam ratione hic harum aut, odio porro assumenda laboriosam vel sed voluptas facere sunt minima impedit delectus dolore ad aspernatur dicta tempora eum fugiat quia excepturi. Nihil consequuntur minima explicabo?</p>
        <p>Perferendis commodi ratione alias facere optio fugit consequuntur quisquam? Harum corrupti atque eaque suscipit, aspernatur, maiores cum qui dolorum fugit ipsum praesentium error eum. Reiciendis a cum vel earum libero!</p>
        <p>Similique quos ratione iure veniam nobis ullam voluptatem corporis velit optio recusandae eos, possimus consequatur deserunt ipsa totam sit quisquam quo voluptatibus pariatur rem ipsam tenetur. Ducimus iste eaque placeat.</p>
        <p>Excepturi ullam voluptatibus dignissimos, distinctio assumenda delectus quam possimus magnam libero iusto, deleniti repudiandae repellendus quisquam consequuntur! Debitis libero quae aspernatur quos repellendus veniam, iste tenetur! At sunt optio quibusdam!</p>
        <p>Dignissimos, aperiam! Delectus, odio? Totam provident ad reiciendis eos earum corrupti error, odio facere perferendis amet? Temporibus praesentium eveniet, exercitationem, fugit, expedita repudiandae fuga ut quibusdam aliquid repellendus adipisci odit!</p>
        <h2 id="a8">008</h2>
        <p>Cumque quasi aliquid iusto rerum distinctio dolore dignissimos doloribus praesentium culpa! Tenetur cum, repellat in, sint ea dolorem at delectus minus dicta recusandae, quas ex quaerat voluptate aspernatur. Neque, a?</p>
        <p>Recusandae ad voluptates sequi accusamus nesciunt animi aperiam earum modi illo magni quidem debitis aspernatur, perspiciatis sunt, magnam aliquid molestias soluta, repellendus quia possimus minus non quo? Cumque, exercitationem aperiam.</p>
        <p>Non vero distinctio culpa, vel soluta, molestiae ut fugit commodi ratione temporibus natus consectetur animi voluptas unde vitae nesciunt, ad ipsa porro laudantium hic ab nulla dolores. Excepturi, in dicta!</p>
        <p>Voluptates qui suscipit tempora maiores totam odio quasi sapiente sed reprehenderit quisquam harum non architecto soluta vitae, nisi itaque consectetur. Temporibus architecto, in quis animi debitis ducimus maiores optio vero!</p>
        <p>Reprehenderit aspernatur totam sunt velit fugit consequuntur dolores impedit, nemo, vel esse enim vitae repellat voluptatum laborum quod recusandae eligendi natus! Nihil repellendus quisquam saepe pariatur ad rem, quos libero.</p>
        <h2 id="a9">009</h2>
        <p>Vero quas porro incidunt nemo sequi vitae natus fuga tenetur harum tempora consectetur laboriosam illum, iusto sint quasi esse omnis deserunt aut dignissimos iste autem nostrum quia minus. Quas, sint!</p>
        <p>Architecto labore asperiores reprehenderit aliquam nam laudantium officiis suscipit, amet sint facere? Sint tempore ipsa temporibus, sed fugit odit veritatis earum nostrum quasi ab tenetur dolores, cum repellendus, praesentium eveniet.</p>
        <p>Perferendis, amet ducimus pariatur, minima laboriosam sapiente corporis nam illum quisquam quasi inventore? Sit, fuga tempora expedita ea, beatae ut explicabo quaerat dignissimos quae voluptas quod aut labore placeat! Enim.</p>
        <p>Similique nostrum numquam nesciunt earum deleniti, reprehenderit minima. Asperiores provident doloremque id reiciendis mollitia architecto nemo autem laborum! Vero, repellat ut quisquam sit aspernatur ab quidem tempore voluptates nemo incidunt.</p>
        <p>Odio consequuntur soluta repellendus sit quam aut repellat praesentium! Vero illum quibusdam dolore tenetur nisi, repellendus incidunt quisquam eius laborum exercitationem vel unde consectetur aut! Nesciunt hic sequi corrupti perferendis!</p>
        <h2 id="a10">010</h2>
        <p>Officia quas modi ea in, sint, voluptatem reprehenderit, id assumenda alias molestiae sequi? Ad necessitatibus laudantium aliquid saepe doloremque! Recusandae odit magnam architecto dolores quidem hic minus quas iusto perferendis?</p>
        <p>Animi tempore, reiciendis laudantium quibusdam tenetur, pariatur officia aspernatur consequuntur modi accusamus excepturi nemo odio beatae ducimus. Distinctio corrupti totam deleniti alias illum! Tempora dicta, quidem architecto non ratione similique.</p>
        <p>Eaque ducimus deleniti pariatur temporibus praesentium distinctio porro, dolore, magnam autem impedit vitae veniam, at possimus commodi. Enim facere repellendus ullam velit, ea a! Quibusdam architecto sed nostrum rerum quia!</p>
        <p>Repudiandae earum similique quis nihil veniam accusantium, esse omnis libero at reiciendis tempore labore incidunt sint, eaque totam eum pariatur dolore optio ex? Necessitatibus deleniti voluptas nulla, unde accusamus perferendis.</p>
        <p>Eligendi ad minus magnam ipsa assumenda laboriosam reiciendis velit ea saepe cum quibusdam earum praesentium possimus non nesciunt perspiciatis numquam aliquid, natus voluptate facilis illum sunt sed alias asperiores. Amet.</p>
    </section>
</body>
<script>
    //右上角简易导航
    var items = Array.from(document.querySelectorAll('h2'));    //获取所有的h2节点组成类对象items
    var ul = document.createElement('ul');                      //创建一个ul元素节点
    ul.classList.add('scroll-spy');                             //在ul中添加scroll-spy类名
    items.forEach(item => {                                     //对items中的每一个元素执行下面函数
        let li = document.createElement('li');                  //创建一个li元素节点
        let a = document.createElement('a');                    //创建一个a元素节点
        a.href = "#" + item.id;                                 //给a元素添加href属性，并把每个item的id加上#号放进去
        a.innerText = item.innerText;                           //a元素的内容是item的内容
        li.appendChild(a);                                      //把a元素放到li元素中
        ul.appendChild(li);                                     //把li元素放到ul中
    })
    document.body.appendChild(ul);                              //把ul元素放到body中
    window.addEventListener('scroll',function(e){               //添加滚动事件
        var underTLTop = items.filter(it => {                   
            var rect = it.getBoundingClientRect();              //获取items中每个元素的大小及其相对视口的位置
            return rect.top > -50;                              //把top属性大于-50的元素整合到underTLTop中
        });
        var curr = underTLTop[0];                               //获取第一个元素
        var idx = items.findIndex(it => it == curr);            //在items中找到这个元素的下标
        Array.from(ul.children).forEach(it => it.classList.remove('active'));           //移除所有li标签的active类名
        ul.children[idx].classList.add('active');               //给指定下标的li元素添加active类名
    })
    

    //右下角进度条
    var prog = document.createElement('div');                   //获取外部div
    var bar = document.createElement('div');                    //获取内部div
    prog.classList.add('progress');                             //给外部元素添加progress类名
    prog.appendChild(bar);                                      //给内部元素bar添加到外部元素prog中
    window.addEventListener('scroll',function(){                //添加滚动事件监听
        var max = document.body.scrollHeight - innerHeight;     //获取滚动最大值
        var barWidth = Math.round(pageYOffset / max * 100);     //算出内部div的width所占百分比
        barWidth = Math.min(100,barWidth);                      //不能超过100
        bar.style.width = barWidth + "%";                       //指定内部div的width
        bar.innerText = barWidth + "%";                         //指定内部div的text
    })
    document.body.appendChild(prog);                            //把外部div放到body中
</script>
</html>